

<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Query Tool &#8212; pgAdmin 4 9.11 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/style.css?v=d36593c3" />
    
    <script src="_static/documentation_options.js?v=8c9bcb9d"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Query Tool Toolbar" href="query_tool_toolbar.html" />
    <link rel="prev" title="Debugger" href="debugger.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="query_tool_toolbar.html" title="Query Tool Toolbar"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="debugger.html" title="Debugger"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pgAdmin 4 9.11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="developer_tools.html" accesskey="U">Developer Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Query Tool</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="query-tool">
<span id="id1"></span><h1><span class="target" id="index-0"></span>Query Tool<a class="headerlink" href="#query-tool" title="Link to this heading">¶</a></h1>
<p>The Query Tool is a powerful, feature-rich environment that allows you to
execute arbitrary SQL commands and review the result set.  You can access the
Query Tool via the <em>Query Tool</em> menu option on the <em>Tools</em> menu, or through the
context menu of select nodes of the Object explorer control.  The Query Tool
allows you to:</p>
<ul class="simple">
<li><p>Issue ad-hoc SQL queries.</p></li>
<li><p>Execute arbitrary SQL commands.</p></li>
<li><p>Edit the result set of a SELECT query if it is
<a class="reference internal" href="#updatable-result-set"><span class="std std-ref">updatable</span></a>.</p></li>
<li><p>Displays current connection and transaction status as configured by the user.</p></li>
<li><p>Save the data displayed in the output panel to a CSV file.</p></li>
<li><p>Review the execution plan of a SQL statement in either a text, a graphical
format or a table format (similar to <a class="reference external" href="https://explain.depesz.com">https://explain.depesz.com</a>).</p></li>
<li><p>View analytical information about a SQL statement.</p></li>
</ul>
<img alt="Query tool window" class="align-center" src="_images/query_tool.png" />
<p>You can open multiple copies of the Query tool in individual tabs
simultaneously.  To close a copy of the Query tool, click the <em>X</em> of the tab.</p>
<p>The Query Tool features two panels:</p>
<ul class="simple">
<li><p>The upper panel displays the <em>SQL Editor</em>. You can use the panel to enter,
edit, or execute a query or a script. It also shows the <em>History</em> tab which can be used
to view the queries that have been executed in the session, and a <em>Scratch Pad</em>
which can be used to hold text snippets during editing. If the Scratch Pad is
closed, it can be re-opened (or additional ones opened) by right-clicking in
the SQL Editor and other panels and adding a new panel.</p></li>
<li><p>The lower panel displays the <em>Data Output</em> panel. The tabbed panel displays
the result set returned by a query, information about a query’s execution plan,
server messages related to the query’s execution and any asynchronous
notifications received from the server.</p></li>
</ul>
<section id="query-tool-in-workspace-layout">
<h2>Query Tool in Workspace Layout<a class="headerlink" href="#query-tool-in-workspace-layout" title="Link to this heading">¶</a></h2>
<p>The workspace layout offers a distraction-free, dedicated area for the Query Tool.
When the Query Tool workspace is accessed, the Welcome page opens by default.</p>
<p><strong>Note</strong>: In the Workspace layout, all Query Tool and View/Edit Data tabs open within the Query Tool workspace.</p>
<p>In the classic UI, users must connect to a database server and navigate to the
database node before using the Query Tool. However, with the introduction of the
Workspace layout and Welcome page, users can seamlessly connect to any ad-hoc
server, even if it is not registered in the Object Explorer.</p>
<img alt="Query tool workspace" class="align-center" src="_images/query_tool_workspace.png" />
<ul class="simple">
<li><p>Select <em>Existing Server</em> from the dropdown to connect to a server already
listed in the Object Explorer. It is optional.</p></li>
<li><p>Provide the <em>Server Name</em> for ad-hoc servers.</p></li>
<li><p>Specify the IP address of the server host, or the fully qualified domain
name in the <em>Host name/address</em> field.</p></li>
<li><p>Enter the listener port number of the server host in the <em>Port</em> field.</p></li>
<li><p>Use the <em>Database</em> field to specify the name of the database to which
the client will connect.</p></li>
<li><p>Use the <em>User</em> field to specify the name of a user that will be used when
authenticating with the server.</p></li>
<li><p>Use the <em>Password</em> field to provide a password that will be supplied when
authenticating with the server.</p></li>
<li><p>Use the <em>Role</em> field to specify the name of a role that has privileges that
will be conveyed to the client after authentication with the server.</p></li>
<li><p>Use the <em>Service</em> field to specify the service name. For more information,
see
<a class="reference external" href="https://www.postgresql.org/docs/current/libpq-pgservice.html">Section 33.16 of the Postgres documentation</a>.</p></li>
<li><p>Use the fields in the <em>Connection Parameters</em> to configure the connection parameters.</p></li>
</ul>
<p>After filling in all the required fields, click the Connect &amp; Open Query Tool
button to launch the Query Tool with the provided server details. If the password
is not supplied, you will be prompted to enter it.</p>
</section>
<section id="toolbar">
<h2>Toolbar<a class="headerlink" href="#toolbar" title="Link to this heading">¶</a></h2>
<p>The toolbar is described in the following subsections.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="query_tool_toolbar.html">Query Tool Toolbar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#file-options">File Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#filter-limit-options">Filter/Limit Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#query-editing-options">Query Editing Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#query-execution">Query Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#data-editing-options">Data Editing Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#pagination-options">Pagination Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_tool_toolbar.html#status-bar">Status Bar</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="the-sql-editor-panel">
<h2>The SQL Editor Panel<a class="headerlink" href="#the-sql-editor-panel" title="Link to this heading">¶</a></h2>
<p>The <em>SQL editor</em> panel is a workspace where you can manually provide a query,
copy a query from another source, or read a query from a file. The SQL editor
features syntax coloring and autocompletion.</p>
<img alt="Query tool editor" class="align-center" src="_images/query_sql_editor.png" />
<p>To use autocomplete, begin typing your query; when you would like the Query
editor to suggest object names or commands that might be next in your query,
press the Control+Space key combination. For example, type “<em>SELECT * FROM</em>”
(without quotes, but with a trailing space), and then press the Control+Space
key combination to select from a popup menu of autocomplete options.</p>
<img alt="Query tool autocomplete feature" class="align-center" src="_images/query_autocomplete.png" />
<p>After entering a query, select the <em>Execute script</em> icon from the toolbar. The
complete contents of the SQL editor panel will be sent to the database server
for execution. To execute only a section of the code that is displayed in the
SQL editor, highlight the text that you want the server to execute, and click the
<em>Execute script</em> icon.</p>
<img alt="Query tool execute script section" class="align-center" src="_images/query_execute_script.png" />
<p>You can also execute a query based on cursor position. Query tool will detect
a query and underline it when cursor position changes. Now, to execute the
current underlined query, hit the <em>Execute query</em> button on the toolbar. If a section
is highlighted then it will behave like normal execute.</p>
<img alt="Query tool execute query section" class="align-center" src="_images/query_execute_query.png" />
<p>The warning will appear only if <em>Underline query at cursor?</em> is set to <em>False</em> and
the <em>Underlined query execute warning?</em> switch is set to <em>True</em> Preferences Query tool’s Options.</p>
<img alt="Query tool execute query warning" class="align-center" src="_images/query_execute_warning.png" />
<p>The message returned by the server when a command executes is displayed on the
<em>Messages</em> tab.  If the command is successful, the <em>Messages</em> tab displays
execution details.</p>
<img alt="Query tool message panel" class="align-center" src="_images/query_tool_message.png" />
<p>Options on the <em>Edit</em> menu offer functionality that helps with code formatting
and commenting:</p>
<ul class="simple">
<li><p>The auto-indent feature will automatically indent text to the same depth as
the previous line when you press the Return key.</p></li>
<li><p>Block indent text by selecting two or more lines and pressing the Tab key.</p></li>
<li><p>Implement or remove SQL style or toggle C style comment notation within your
code.</p></li>
</ul>
<p>You can also <strong>drag and drop</strong> certain objects from the treeview which
can save time in typing long object names. Text containing the object name will be
fully qualified with schema. Double quotes will be added if required.
For functions and procedures, the function name along with parameter names will
be pasted in the Query Tool.</p>
</section>
<section id="query-history-panel">
<h2>Query History Panel<a class="headerlink" href="#query-history-panel" title="Link to this heading">¶</a></h2>
<p>Use the <em>Query History</em> tab to review activity for the current session:</p>
<img alt="Query tool history panel" class="align-center" src="_images/query_output_history.png" />
<p>The Query History tab displays information about recent commands:</p>
<ul class="simple">
<li><p>The date and time that a query was invoked.</p></li>
<li><p>The text of the query.</p></li>
<li><p>The number of rows returned by the query.</p></li>
<li><p>The amount of time it took the server to process the query and return a
result set.</p></li>
<li><p>Messages returned by the server (not noted on the <em>Messages</em> tab).</p></li>
<li><p>The source of the query (indicated by icons corresponding to the toolbar).</p></li>
</ul>
<p>You can show or hide the queries generated internally by pgAdmin (during
‘View/Edit Data’ or ‘Save Data’ operations).</p>
<p>You can remove a single query by selecting it and clicking on the <em>Remove</em>
button. If you would like to remove all of the histories from the
<em>Query History</em> tab, then click on the <em>Remove All</em> button.</p>
<p>By using the <em>Copy</em> button, you can copy a particular query to the clipboard,
and with the <em>Copy to Query Editor</em> button, you can copy a specific query to
the Query Editor tab. During this operation, all existing content in the
Query Editor is erased.</p>
<p>Query History is maintained across sessions for each database on a per-user
basis when running in Query Tool mode. In View/Edit Data mode, history is not
retained. By default, the last 20 queries are stored for each database. This
can be adjusted in <code class="docutils literal notranslate"><span class="pre">config_local.py</span></code> or <code class="docutils literal notranslate"><span class="pre">config_system.py</span></code> (see the
<a class="reference internal" href="config_py.html#config-py"><span class="std std-ref">config.py</span></a> documentation) by overriding the
<cite>MAX_QUERY_HIST_STORED</cite> value. See the <a class="reference internal" href="deployment.html#deployment"><span class="std std-ref">Deployment</span></a> section
for more information.</p>
</section>
<section id="the-data-output-panel">
<h2>The Data Output Panel<a class="headerlink" href="#the-data-output-panel" title="Link to this heading">¶</a></h2>
<p>The <em>Data Output</em> panel displays data and statistics generated by the most
recently executed query.</p>
<img alt="Query tool output panel" class="align-center" src="_images/query_output_data.png" />
<p>The <em>Data Output</em> tab displays the result set of the query in a table format.
You can:</p>
<ul class="simple">
<li><p>Select and copy from the displayed result set.</p></li>
<li><p>Use the <em>Save results to file</em> icon to save the content of the <em>Data Output</em>
tab as a comma-delimited file.</p></li>
<li><p>Edit the data in the result set of a SELECT query if it is updatable.</p></li>
<li><p>Move between pages of data result.</p></li>
</ul>
<p id="updatable-result-set">A result set is updatable if:</p>
<ul class="simple">
<li><p>All columns are either selected directly from a single table, or
are not table columns at all (e.g. concatenation of 2 columns).
Only columns that are selected directly from the table are
editable, other columns are read-only.</p></li>
<li><p>All the primary key columns or OIDs of the table are selected in the
result set.</p></li>
</ul>
<p>Any columns that are renamed or selected more than once are also read-only.</p>
<p>Editable and read-only columns are identified using pencil and lock icons
(respectively) in the column headers.</p>
<img alt="Query tool editable and read-only columns" class="align-center" src="_images/query_tool_editable_columns.png" />
<p>The  psycopg2 driver version should be equal to or above 2.8 for updatable
query result sets to work.</p>
<p>An updatable result set is identical to the <a class="reference internal" href="editgrid.html#data-grid"><span class="std std-ref">Data Grid</span></a> in
View/Edit Data mode, and can be modified in the same way.</p>
<p>If Auto-commit is off, the data changes are made as part of the ongoing
transaction, if no transaction is ongoing a new one is initiated. The data
changes are not committed to the database unless the transaction is committed.</p>
<p>If any errors occur during saving (for example, trying to save NULL into a
column with NOT NULL constraint) the data changes are rolled back to an
automatically created SAVEPOINT to ensure any previously executed queries in
the ongoing transaction are not rolled back.</p>
<p>All rowsets from previous queries or commands that are displayed in the <em>Data
Output</em> panel will be discarded when you invoke another query; open another
Query Tool tab to keep your previous results available.</p>
</section>
<section id="explain-panel">
<h2>Explain Panel<a class="headerlink" href="#explain-panel" title="Link to this heading">¶</a></h2>
<p>To generate the <em>Explain</em> or <em>Explain Analyze</em> plan of a query, click on
<em>Explain</em> or <em>Explain Analyze</em> button in the toolbar.</p>
<p>More options related to <em>Explain</em> and <em>Explain Analyze</em> can be selected from
the drop down on the right side of <em>Explain Analyze</em> button in the toolbar.</p>
<img alt="Query tool toolbar explain button" class="align-center" src="_images/query_toolbar_explain.png" />
<p>Please note that pgAdmin generates the <em>Explain [Analyze]</em> plan in JSON format.</p>
<p><strong>Note</strong>: If multiple queries are present and none is selected, <em>Explain [Analyze]</em> runs the query located at the cursor position.</p>
<p>On successful generation of <em>Explain</em> plan, it will create three tabs/panels
under the Explain panel.</p>
<ul class="simple">
<li><p>Graphical</p></li>
</ul>
<p>Please note that <em>EXPLAIN VERBOSE</em> cannot be displayed graphically. Click on
a node icon on the <em>Graphical</em> tab to review information about that item; a popup
window will display on the right side with the information about the selected
object. For information on JIT statistics, triggers and a summary, click on the
button on top-right corner; a similar popup window will be displayed when appropriate.</p>
<p>Use the download button on top left corner of the <em>Explain</em> canvas to download
the plan as an SVG file.</p>
<p><strong>Note:</strong> Download as SVG is not supported on Internet Explorer.</p>
<img alt="Query tool graphical explain plan" class="align-center" src="_images/query_output_explain_details.png" />
<p>Note that the query plan that accompanies the <em>Explain analyze</em> is available on
the <em>Data Output</em> tab.</p>
<ul class="simple">
<li><p>Table</p></li>
</ul>
<p><em>Table</em> tab shows the plan details in table format, it generates table format
similar to <em>explain.depesz.com</em>. Each row of the table represent the data for a
<em>Explain Plan Node</em>. It may contain the node information, exclusive timing,
inclusive timing, actual vs planned rows differences, actual rows, planned
rows, loops.</p>
<p>background color of the exclusive, inclusive, and Rows X columns may vary based on the
difference between actual vs planned.</p>
<p>If percentage of the exclusive/inclusive timings of the total query time is:
&gt; 90 - Red color
&gt; 50 - Orange (between red and yellow) color
&gt; 10 - Yellow color</p>
<p>If planner mis-estimated number of rows (actual vs planned) by
10 times - Yellow color
100 times - Orange (between Red and Yellow) color
1000 times - Red color</p>
<img alt="Query tool explain plan table" class="align-center" src="_images/query_explain_analyze_table.png" />
<ul class="simple">
<li><p>Statistics</p></li>
</ul>
<p><em>Statistics</em> tab shows two tables:
1. Statistics per Plan Node Type
2. Statistics per Table</p>
<img alt="Query tool explain plan statistics" class="align-center" src="_images/query_explain_analyze_statistics.png" />
</section>
<section id="messages-panel">
<h2>Messages Panel<a class="headerlink" href="#messages-panel" title="Link to this heading">¶</a></h2>
<p>Use the <em>Messages</em> tab to view information about the most recently executed
query:</p>
<img alt="Query tool output messages" class="align-center" src="_images/query_output_error.png" />
<p>If the server returns an error, the error message will be displayed on the
<em>Messages</em> tab, and the syntax that caused the error will be underlined in the
SQL editor.  If a query succeeds, the <em>Messages</em> tab displays how long the
query took to complete and how many rows were retrieved:</p>
<img alt="Query tool output information" class="align-center" src="_images/query_output_messages.png" />
</section>
<section id="notifications-panel">
<h2>Notifications Panel<a class="headerlink" href="#notifications-panel" title="Link to this heading">¶</a></h2>
<p>Use the <em>Notifications</em> tab to view the notifications using PostgreSQL <em>Listen/
Notify</em> feature. For more details see <a class="reference external" href="https://www.postgresql.org/docs/current/sql-listen.html">PostgreSQL documentation</a>.</p>
<p>Example:</p>
<ol class="arabic simple">
<li><p>Execute <em>LISTEN “foo”</em> in first <em>Query Tool</em> session</p></li>
</ol>
<img alt="Query tool notifications listen" class="align-center" src="_images/query_output_notifications_listen.png" />
<p>2. In the another <em>Query Tool</em> session, execute <em>Notify</em> command or <em>pg_notify</em>
function to send the notification of the event together with the payload.</p>
<img alt="Query tool notifications notify" class="align-center" src="_images/query_output_notifications_notify.png" />
<p>3. You can observe the <em>Notification</em> tab in the first <em>Query Tool</em> session
where it shows the Recorded time, Event, Process ID, and the Payload of the
particular channel.</p>
<img alt="Query tool notifications panel" class="align-center" src="_images/query_output_notifications_panel.png" />
</section>
<section id="graph-visualiser-panel">
<h2>Graph Visualiser Panel<a class="headerlink" href="#graph-visualiser-panel" title="Link to this heading">¶</a></h2>
<p>Click the Graph Visualiser button in the toolbar to generate the <em>Graphs</em> of
the query results. The graph visualiser supports Line Charts, Stacked Line Charts,
Bar Charts, Stacked Bar Charts, and Pie Charts.</p>
<img alt="Query tool graph visualiser panel" class="align-center" src="_images/query_graph_visualiser_panel.png" />
<ul class="simple">
<li><p>Graph Type</p></li>
</ul>
<p>Choose the type of the graph that you would like to generate.</p>
<img alt="Query tool graph visualiser graph type" class="align-center" src="_images/query_graph_type.png" />
<ul class="simple">
<li><p>X Axis</p></li>
</ul>
<p>Choose the column whose value you wish to display on X-axis from the <em>X Axis</em>
dropdown. Select the <em>&lt;Row Number&gt;</em> option to use the number of rows as labels
on the X-axis.</p>
<img alt="Query tool graph visualiser xaxis" class="align-center" src="_images/query_graph_xaxis.png" />
<ul class="simple">
<li><p>Y Axis</p></li>
</ul>
<p>Choose the columns whose value you wish to display on Y-axis from the <em>Y Axis</em>
dropdown. Users can choose multiple columns. Choose the <em>&lt;Select All&gt;</em> option
from the drop-down menu to select all the columns.</p>
<img alt="Query tool graph visualiser yaxis" class="align-center" src="_images/query_graph_yaxis.png" />
<ul class="simple">
<li><p>Download and Zoom button</p></li>
</ul>
<p>Zooming is performed by clicking and selecting an area over the chart with the
mouse. The <em>Zoom to original</em> button will bring you back to the original zoom
level.</p>
<p>Click the <em>Download</em> button on the button bar to download the chart.</p>
<img alt="Query tool graph visualiser toolbar" class="align-center" src="_images/query_graph_toolbar.png" />
<section id="line-chart">
<h3>Line Chart<a class="headerlink" href="#line-chart" title="Link to this heading">¶</a></h3>
<p>The <em>Line Chart</em> can be generated by selecting the ‘Line Chart’
from the Graph Type drop-down, selecting the X-axis and the Y-axis, and
clicking on the ‘Generate’ button. Below is an example of a chart of employee
names and their salaries.</p>
<img alt="Query tool graph visualiser line chart" class="align-center" src="_images/query_line_chart.png" />
<p>Set <em>Use different data point styles?</em> option to true in the <a class="reference internal" href="preferences.html#preferences"><span class="std std-ref">Preferences</span></a>,
to show data points in a different style on each graph lines.</p>
</section>
<section id="stacked-line-chart">
<h3>Stacked Line Chart<a class="headerlink" href="#stacked-line-chart" title="Link to this heading">¶</a></h3>
<p>The <em>Stacked Line Chart</em> can be generated by selecting the ‘Stacked Line Chart’
from the Graph Type drop-down, selecting the X-axis and the Y-axis, and
clicking on the ‘Generate’ button.</p>
<img alt="Query tool graph visualiser stacked line chart" class="align-center" src="_images/query_stacked_line_chart.png" />
</section>
<section id="bar-chart">
<h3>Bar Chart<a class="headerlink" href="#bar-chart" title="Link to this heading">¶</a></h3>
<p>The <em>Bar Chart</em> can be generated by selecting the ‘Bar Chart’
from the Graph Type drop-down, selecting the X-axis and the Y-axis, and
clicking on the ‘Generate’ button.</p>
<img alt="Query tool graph visualiser bar chart" class="align-center" src="_images/query_bar_chart.png" />
</section>
<section id="stacked-bar-chart">
<h3>Stacked Bar Chart<a class="headerlink" href="#stacked-bar-chart" title="Link to this heading">¶</a></h3>
<p>The <em>Stacked Bar Chart</em> can be generated by selecting the ‘Stacked Bar Chart’
from the Graph Type drop-down, selecting the X-axis and the Y-axis, and
clicking on the ‘Generate’ button.</p>
<img alt="Query tool graph visualiser stacked bar chart" class="align-center" src="_images/query_stacked_bar_chart.png" />
</section>
<section id="pie-chart">
<h3>Pie Chart<a class="headerlink" href="#pie-chart" title="Link to this heading">¶</a></h3>
<p>The <em>Pie Chart</em> can be generated by selecting the ‘Pie Chart’
from the Graph Type drop-down, selecting the Label and Value, and
clicking on the ‘Generate’ button.</p>
<img alt="Query tool graph visualiser pie chart" class="align-center" src="_images/query_pie_chart.png" />
</section>
</section>
<section id="connection-status">
<h2>Connection Status<a class="headerlink" href="#connection-status" title="Link to this heading">¶</a></h2>
<p>Use the <em>Connection status</em> feature to view the current connection and
transaction status by clicking on the status icon in the Query Tool:</p>
<img alt="Query tool connection and transaction statuses" class="align-center" src="_images/query_tool_connection_status.png" />
</section>
<section id="change-connection">
<h2>Change connection<a class="headerlink" href="#change-connection" title="Link to this heading">¶</a></h2>
<p>User can connect to another server or database from existing open session of query tool.</p>
<ul class="simple">
<li><p>Click on the connection link next to connection status.</p></li>
<li><p>Now click on the <em>&lt;New Connection&gt;</em> option from the dropdown.</p></li>
</ul>
<img alt="Query tool connection options" class="align-center" src="_images/query_tool_new_connection_options.png" />
<ul class="simple">
<li><p>Now select server, database, user, and role to connect and click on the ‘Save’ button.</p></li>
</ul>
<img alt="Query tool connection dialog" class="align-center" src="_images/query_tool_new_connection_dialog.png" />
<ul class="simple">
<li><p>A newly created connection will now get listed in the options.</p></li>
<li><p>To connect, select the newly created connection from the dropdown list.</p></li>
</ul>
</section>
<section id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Link to this heading">¶</a></h2>
<p>Query Tool Macros enable you to execute pre-defined SQL queries with a single key press. Pre-defined queries can contain the placeholder $SELECTION$. Upon macro execution, the placeholder will be replaced with the currently selected text in the Query Editor pane of the Query Tool.</p>
<img alt="Query Tool Manage macros" class="align-center" src="_images/query_tool_manage_macros.png" />
<p>To create a macro, select the <em>Manage Macros</em> option from the <em>Macros</em> menu on the <em>Query Tool</em>. Select the key you wish to use, enter the name of the macro, and the query, optionally including the selection placeholder, and then click the <em>Save</em> button to store the macro.</p>
<img alt="Query Tool Manage Macros dialogue" class="align-center" src="_images/query_tool_manage_macros_dialog.png" />
<p>To add a query to macros, write and select your query, then go to the <em>Macros</em> menu in the Query Tool and click <em>Add to macros</em>. Your query will be automatically saved to macros.</p>
<img alt="Query Tool Add To Macros" class="align-center" src="_images/query_tool_add_to_macro.png" />
<p>To delete a macro, select the macro on the <em>Manage Macros</em> dialogue, and then click the <em>Delete</em> button.
The server will prompt you for confirmation to delete the macro.</p>
<img alt="Query Tool Manage Macros Clear row confirmation" class="align-center" src="_images/query_tool_macros_clear_confirmation.png" />
<p>To execute a macro, simply select the appropriate shortcut keys, or select it from the <em>Macros</em> menu.</p>
<img alt="Query Tool Macros Execution" class="align-center" src="_images/query_output_data.png" />
</section>
<section id="server-side-cursor">
<h2>Server Side Cursor<a class="headerlink" href="#server-side-cursor" title="Link to this heading">¶</a></h2>
<p>Server-side cursors allow partial retrieval of large datasets, making them particularly useful when working with
very large result sets. However, they may offer lower performance in typical, everyday usage scenarios.</p>
<p>To enable server-side cursors:</p>
<ul class="simple">
<li><p>Go to Preferences &gt; Query Tool &gt; Options and set “Use server cursor?” to True.</p></li>
<li><p>Alternatively, you can enable it on a per-session basis via the Query Tool’s Execute menu.</p></li>
</ul>
<img alt="Query Tool Server Cursor" class="align-center" src="_images/query_tool_server_cursor_execute_menu.png" />
<p>Limitations:</p>
<p>1. Transaction Requirement: Server-side cursors work only in transaction mode.
If enabled pgAdmin will automatically ensure queries run within a transaction.</p>
<ol class="arabic simple" start="2">
<li><p>Limited Use Case: Use server-side cursors only when fetching large datasets.</p></li>
</ol>
<p>3. Pagination Limitation: In the Result Grid, the First and Last page buttons will be disabled,
as server-side cursors do not return a total row count. Consequently, the total number of rows
will not be displayed after execution.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Query Tool</a><ul>
<li><a class="reference internal" href="#query-tool-in-workspace-layout">Query Tool in Workspace Layout</a></li>
<li><a class="reference internal" href="#toolbar">Toolbar</a></li>
<li><a class="reference internal" href="#the-sql-editor-panel">The SQL Editor Panel</a></li>
<li><a class="reference internal" href="#query-history-panel">Query History Panel</a></li>
<li><a class="reference internal" href="#the-data-output-panel">The Data Output Panel</a></li>
<li><a class="reference internal" href="#explain-panel">Explain Panel</a></li>
<li><a class="reference internal" href="#messages-panel">Messages Panel</a></li>
<li><a class="reference internal" href="#notifications-panel">Notifications Panel</a></li>
<li><a class="reference internal" href="#graph-visualiser-panel">Graph Visualiser Panel</a><ul>
<li><a class="reference internal" href="#line-chart">Line Chart</a></li>
<li><a class="reference internal" href="#stacked-line-chart">Stacked Line Chart</a></li>
<li><a class="reference internal" href="#bar-chart">Bar Chart</a></li>
<li><a class="reference internal" href="#stacked-bar-chart">Stacked Bar Chart</a></li>
<li><a class="reference internal" href="#pie-chart">Pie Chart</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection-status">Connection Status</a></li>
<li><a class="reference internal" href="#change-connection">Change connection</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
<li><a class="reference internal" href="#server-side-cursor">Server Side Cursor</a></li>
</ul>
</li>
</ul>

  </div>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_database.html">External database for pgAdmin user settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting To A Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_cluster_objects.html">Managing Cluster Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_database_objects.html">Managing Database Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="modifying_tables.html">Creating or Modifying a Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="management_basics.html">Management Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup_and_restore.html">Backup and Restore</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer_tools.html">Developer Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="debugger.html">Debugger</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Query Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="editgrid.html">View/Edit Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema_diff.html">Schema Diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="erd_tool.html">ERD Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="psql_tool.html">PSQL Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgagent.html">pgAgent</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions.html">pgAdmin Project Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence</a></li>
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
<div id="sidebarbutton" title="Collapse sidebar">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="query_tool_toolbar.html" title="Query Tool Toolbar"
             >next</a> |</li>
        <li class="right" >
          <a href="debugger.html" title="Debugger"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pgAdmin 4 9.11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="developer_tools.html" >Developer Tools</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Query Tool</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        <div class="related" role="navigation" aria-label="related navigation">
          <ul>
              <li class="left" style="margin-left: 10px">&#169; Copyright (C) 2013 - 2025, The pgAdmin Development Team.</li>
            <li class="right" style="margin-right: 10px"><a href="genindex.html" title="General Index">index</a></li>
            <li class="right" ><a href="query_tool_toolbar.html" title="Query Tool Toolbar">next</a> |</li>
            <li class="right" ><a href="debugger.html" title="Debugger">previous</a> |</li>
          </ul>
        </div>
    </div>
  </body>
</html>